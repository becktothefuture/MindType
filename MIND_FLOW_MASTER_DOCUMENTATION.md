<!--‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
  ‚ïë  ‚ñë  M I N D ‚†∂ F L O W   M A S T E R   D O C U M E N T A T I O N  ‚ñë  ‚ïë
  ‚ïë                                                              ‚ïë
  ‚ïë   The Ultimate Source of Truth - Revolutionary Typing       ‚ïë
  ‚ïë   Intelligence System Documentation                          ‚ïë
  ‚ïë                                                              ‚ïë
  ‚ïë           ‚ïå‚ïå  P L A C E H O L D E R  ‚ïå‚ïå                      ‚ïë
  ‚ïë                                                              ‚ïë
  ‚ïë                                                              ‚ïë
  ‚ïë                                                              ‚ïë
  ‚ïë                                                              ‚ïë
  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
    ‚Ä¢ WHAT ‚ñ∏ Complete documentation for Mind‚†∂Flow revolutionary typing system
    ‚Ä¢ WHY  ‚ñ∏ Single source of truth for all stakeholders and developers
    ‚Ä¢ HOW  ‚ñ∏ Comprehensive guide covering vision, implementation, and operations
-->

# Mind‚†∂Flow: Revolutionary Typing Intelligence
## Master Documentation - The Ultimate Source of Truth

**Version**: 1.0  
**Last Updated**: 2025-01-27  
**Status**: Revolutionary v0.6+ Complete Documentation

---

## Table of Contents

1. [Executive Summary](#executive-summary)
2. [Revolutionary Vision & Philosophy](#revolutionary-vision--philosophy)
3. [The Seven Revolutionary Scenarios](#the-seven-revolutionary-scenarios)
4. [The Correction Marker System](#the-correction-marker-system)
5. [System Principles](#system-principles)
6. [Technical Architecture](#technical-architecture)
7. [Implementation Guide](#implementation-guide)
8. [Project Structure](#project-structure)
9. [Quality Assurance & Testing](#quality-assurance--testing)
10. [Accessibility & Compliance](#accessibility--compliance)
11. [Brand & Messaging](#brand--messaging)
12. [Development Roadmap](#development-roadmap)
13. [Versioning & Release Policy](#versioning--release-policy)
14. [Developer Guides](#developer-guides)
15. [Architectural Decision Records](#architectural-decision-records)
16. [Glossary & Terminology](#glossary--terminology)

---

## Executive Summary

Mind‚†∂Flow transforms typing from a mechanical skill into **fluid expression of thought**. Through our revolutionary **Correction Marker** system and **Burst-Pause-Correct** methodology, users achieve thought-speed typing with unprecedented accuracy and flow state preservation.

### Core Innovation
The **Correction Marker**‚Äîan intelligent visual worker that travels through text, applying corrections behind the cursor while users maintain unbroken typing rhythm.

### Target Impact
- **3√ó effective WPM increase**
- **95%+ semantic accuracy**
- **Thought-speed typing experience**
- **Seven revolutionary usage scenarios**

### Key Features
- **Revolutionary Visual System**: Hypnotic braille pulse animation with intelligent correction mode
- **Cognitive Augmentation**: Typing at the speed of neural firing
- **Privacy-First Architecture**: On-device processing with optional encrypted remote
- **Accessibility-Native**: WCAG 2.2 AA compliance with innovative accommodations
- **Device-Tier Adaptive**: Optimal performance across all hardware tiers

---

## Revolutionary Vision & Philosophy

### Purpose
Transform typing from mechanical skill into **fluid expression of thought**. Mind‚†∂Flow amplifies human capability through the revolutionary **Correction Marker** system, enabling **thought-speed typing** while preserving authorship, privacy, and flow state.

### Core Philosophy: Cognitive Augmentation
Mind‚†∂Flow doesn't just correct errors‚Äîit **unlocks latent human potential** by removing the cognitive overhead of mechanical accuracy. Users operate at the speed of thought, trusting Mind‚†∂Flow to handle the translation between rapid human intent and polished communication.

### Revolutionary Paradigm: Burst-Pause-Correct
**Muscle Memory Training**: Users develop unconscious rhythm:
1. **Burst Phase**: Rapid, uninhibited typing (trust the system)
2. **Pause Recognition**: Natural breathing moment (0.5-2 seconds)
3. **Correction Anticipation**: Subconscious expectation of refinement
4. **Flow Resumption**: Seamless continuation with enhanced confidence

### Vision Statement
*"Mind‚†∂Flow doesn't just correct typing‚Äîit unlocks human potential at the intersection of thought and text."*

---

## The Seven Revolutionary Scenarios

### Scenario 1: Academic Excellence - Maya (Graduate Student with Dyslexia)
**Context**: PhD in Environmental Science, struggles with dyslexia and complex terminology  
**Challenge**: Academic writing requires precision but dyslexia causes frequent letter transpositions  
**Mind‚†∂Flow Solution**: Three-stage pipeline (Noise ‚Üí Context ‚Üí Tone) with academic vocabulary support  
**Key Requirements**:
- Scientific terminology correction
- Real-time transposition fixes ("resarch" ‚Üí "research")
- Privacy-first on-device processing for unpublished research
- Screen reader compatibility for accessibility

**Impact**: **50% reduction in academic writing time**

### Scenario 2: Professional Productivity - Carlos (Multilingual Business Analyst)
**Context**: International consulting, switches between English/Spanish/Portuguese  
**Challenge**: Mixed-language errors, keyboard mapping confusion, professional credibility  
**Mind‚†∂Flow Solution**: Context-aware language detection with cross-linguistic error correction  
**Key Requirements**:
- Mixed-language error detection ("finacial analisys shows que")
- 15ms latency to match 85 WPM typing speed
- Professional tone consistency across languages
- Cultural context preservation

**Impact**: **40% faster multilingual document creation**

### Scenario 3: Accessibility Champion - Dr. Sarah Chen (Legally Blind Researcher)
**Context**: Biomedical researcher with diabetic retinopathy, relies on screen readers  
**Challenge**: Audio feedback for corrections disrupts concentration  
**Mind‚†∂Flow Solution**: Silent corrections with single batch announcements  
**Key Requirements**:
- Caret-safe editing (never disrupts screen reader position)
- Single announcement per correction batch: "text updated behind cursor"
- High-contrast Correction Marker for low vision users
- Scientific terminology accuracy for grant writing

**Impact**: **60% fewer audio interruptions during writing**

### Scenario 4: Creative Flow State - James (Novelist & Screenwriter)
**Context**: Professional writer seeking uninterrupted creative flow  
**Challenge**: Stopping to correct typos breaks creative momentum  
**Mind‚†∂Flow Solution**: Stream-of-consciousness typing with background refinement  
**Key Requirements**:
- Real-time streaming corrections during rapid writing bursts
- Narrative coherence maintenance across long passages
- Creative voice preservation (minimal tone interference)
- Musical rhythm of Correction Marker enhances flow

**Impact**: **35% increase in daily word count with maintained quality**

### Scenario 5: Everyday Efficiency - Emma (Working Parent)
**Context**: Marketing professional juggling work and parenting  
**Challenge**: Typing in stolen moments with fatigue-induced errors  
**Mind‚†∂Flow Solution**: Seamless professional polish without conscious effort  
**Key Requirements**:
- Invisible enhancement ("campain" ‚Üí "campaign" without user awareness)
- Professional tone for business communications
- Quick burst typing support (emails during soccer practice)
- Battery-efficient processing for mobile devices

**Impact**: **90% of communications achieve professional tone automatically**

### Scenario 6: Speed Demon - Marcus (Professional Stenographer Turned Digital)
**Context**: Former court stenographer achieving 225 WPM on stenotype, limited to ~100 WPM on QWERTY  
**Challenge**: Fingers know the speed but traditional keyboards can't keep up  
**Mind‚†∂Flow Solution**: **Velocity Mode** - Revolutionary speed unlocking through trust-based typing  
**Key Requirements**:
- Sub-15ms correction latency to support 180+ WPM
- Phonetic shorthand understanding ("Th defdnt clamd tht th contrct ws invld")
- Complete trust interface - user never slows down for accuracy
- Real-time legal terminology correction
- **Breakthrough**: Thought-to-text at neural firing speed

**Impact**: **180+ WPM sustained speed on standard keyboard**

### Scenario 7: Data Whisperer - Priya (Quantitative Research Analyst)
**Context**: Hedge fund analyst processing massive datasets with rapid annotations  
**Challenge**: Traditional forms/dropdowns too slow for analytical flow  
**Mind‚†∂Flow Solution**: Stream-of-consciousness data entry with intelligent formatting  
**Key Requirements**:
- Custom "data dialect" understanding ("hgh rvn grwth tch stk +sent")
- Domain-specific expansion (biotech, financial terminology)
- 5√ó speed increase over traditional data entry methods
- Analytical flow preservation - brain stays in pure analysis mode
- **Innovation**: Human-AI collaboration for rapid insight capture

**Impact**: **5√ó faster data annotation with maintained analytical accuracy**

---

## The Correction Marker System

### Revolutionary Visual Paradigm
The **Correction Marker** is the core innovation that transforms typing from a mechanical task into cognitive augmentation. It serves as an intelligent visual worker that travels through text, applying corrections behind the cursor while users maintain unbroken typing rhythm.

### Two-Mode Operation

#### Listening Mode: The Digital Pulse
- **Visual**: Hypnotic braille symbol rotation (‚†Ç ‚Üí ‚†Ñ ‚Üí ‚†Ü ‚Üí ‚†† ‚Üí ‚†¢ ‚Üí ‚†§ ‚Üí ‚†¶ ‚Üí ‚†∞ ‚Üí ‚†≤ ‚Üí ‚†¥ ‚Üí ‚†∂)
- **Behavior**: Marker holds position at last correction point, pulsing with anticipation
- **Timing**: 200ms per symbol, 2.4-second complete cycle
- **Purpose**: Visual feedback that system is actively listening

#### Correction Mode: The Intelligent Worker
- **Trigger**: User pause >500ms
- **Motion**: Accelerates from waiting position toward cursor
- **Speed Adaptation**:
  - Noise corrections: 50ms/word (simple typos)
  - Context analysis: 150ms/word (grammar/flow)
  - Tone processing: 300ms/word (style refinement)
- **Visual**: Dynamic braille patterns indicating processing complexity

### Visual Experience
- **Whoosh Effect**: Marker flows like liquid intelligence with trailing effect
- **Processing Indicators**: Different braille patterns for correction types
- **Wake Effect**: Corrected words briefly highlight with 85% opacity fade
- **Accessibility**: High contrast, reduced-motion compliance, screen reader integration

### Technical Implementation
```typescript
interface CorrectionMarker {
  mode: 'listening' | 'correcting' | 'idle';
  position: number;
  targetPosition: number;
  animationState: BrailleSymbol;
  processingIntensity: 'light' | 'medium' | 'heavy';
}

// Braille symbol animation sequences
const LISTENING_SEQUENCE = ['‚†Ç', '‚†Ñ', '‚†Ü', '‚††', '‚†¢', '‚†§', '‚†¶', '‚†∞', '‚†≤', '‚†¥', '‚†∂'];
const CORRECTING_PATTERNS = {
  noise: ['‚†Å', '‚†Ç', '‚†Ñ', '‚†à'],
  context: ['‚†É', '‚†Ü', '‚†å'],
  tone: ['‚†∑', '‚†ø', '‚†∑']
};
```

---

## System Principles

### 1. Burst-Pause-Correct Rhythm
**Core Innovation**: Train users in natural typing rhythm where bursts of rapid input are followed by intelligent correction during natural pauses.

**Behavior**: 
- **Burst Phase**: Correction Marker holds position, pulsing in listening mode
- **Pause Recognition**: 500ms trigger activates correction mode
- **Correction Phase**: Marker travels through text, applying refinements
- **Flow Resumption**: Seamless return to burst typing

### 2. Correction Marker as Cognitive Partner
**Innovation**: Visual representation of AI intelligence working alongside human creativity.

**Behavior**:
- **Listening Mode**: Hypnotic braille pulse
- **Correction Mode**: Purposeful travel with speed adaptation based on processing complexity
- **Processing Indicators**: Different braille patterns for noise/context/tone corrections
- **Accessibility**: High contrast, reduced-motion compliance, screen reader integration

### 3. Scenario-Driven Intelligence
**Philosophy**: One size fits none‚ÄîMind‚†∂Flow adapts to specific user contexts and needs.

**Behavior**:
- **Academic Mode**: Scientific terminology, transposition priority, privacy-first
- **Multilingual Mode**: Cross-language error detection, cultural context preservation
- **Velocity Mode**: Phonetic shorthand, trust-based interface, legal terminology
- **Data Mode**: Custom dialect understanding, domain-specific expansion
- **Creative Mode**: Voice preservation, narrative coherence, flow enhancement
- **Professional Mode**: Tone consistency, business terminology, polished output
- **Accessibility Mode**: Screen reader optimization, silent corrections, high contrast

### 4. Caret-Safe Guarantee
**Absolute Rule**: No correction ever occurs at or after the cursor position.

**Behavior**:
- Active region limited to text behind caret (default 20 words)
- If cursor moves into correction zone, correction is immediately cancelled
- Safety validation before every edit operation
- Graceful degradation when safety constraints conflict with corrections

### 5. Privacy-First Architecture
**Philosophy**: User text is sacred‚Äîprotect it with on-device processing by default.

**Behavior**:
- Default: All processing happens locally using WebGPU/WASM language models
- Optional: Encrypted remote processing with explicit per-session opt-in
- No user text persistence‚Äîonly settings and preferences stored
- Secure context detection‚Äîdisabled in password fields and IME composition

### 6. Device-Tier Adaptive Performance
**Philosophy**: Meet every device where it is‚Äîfrom high-end MacBook Pro to older hardware.

**Behavior**:
- **WebGPU Tier**: 15ms latency, 48 token limit, 60 FPS marker animation
- **WASM Tier**: 25ms latency, 24 token limit, 30 FPS marker animation  
- **CPU Tier**: 30ms latency, 16 token limit, 15 FPS marker animation
- Graceful degradation without feature loss

### 7. Fail-Soft Reliability
**Philosophy**: Any error should degrade gracefully, never block the user's typing flow.

**Behavior**:
- Timeouts cancel work and defer until next pause
- Missing local models ‚Üí rules-only mode with setup guidance
- GPU unavailable ‚Üí WASM fallback ‚Üí CPU fallback
- Network errors ‚Üí local-only operation

---

## Technical Architecture

### Core Technology Stack
- **Rust Core**: All correction logic, caret-safe operations, performance-critical paths
- **TypeScript UI**: Correction Marker rendering, scenario management, user interaction
- **WebGPU/WASM**: Device-tier optimization for language model inference
- **React Playground**: Development and demonstration environment

### Three-Stage Pipeline
1. **Noise Transformer**: Immediate typo fixes (sub-millisecond)
2. **Context Transformer**: Grammar and coherence (English-only, LM-powered)
3. **Tone Transformer**: Optional style adjustment (None/Casual/Professional)

### Performance Targets
- **Latency**: p95 ‚â§ 15ms (WebGPU), ‚â§ 30ms (WASM/CPU)
- **Memory**: ‚â§150MB typical, ‚â§200MB maximum
- **Accuracy**: ‚â•95% semantic accuracy
- **Speed Enhancement**: 3√ó effective WPM increase

### Safety & Privacy
- **Caret-Safe Guarantee**: No corrections at/after cursor position
- **On-Device Processing**: Default local-only, optional encrypted remote
- **Secure Context Detection**: Disabled in password fields, IME composition
- **Privacy**: No user text persistence, session-only opt-ins

### Device Tier Optimization
- **WebGPU**: 48 token limit, fastest processing
- **WASM**: 24 token limit, balanced performance
- **CPU**: 16 token limit, graceful degradation

---

## Implementation Guide

### Implementation Philosophy
- **Scenario-First Development**: Each feature must enable specific user scenarios
- **Correction Marker Centricity**: All visual feedback flows through the marker system
- **Performance-First**: Sub-15ms latency is non-negotiable
- **Accessibility-Native**: WCAG compliance built-in, not bolted-on

### Phase 1: Foundation (Weeks 1-4)

#### 1.1 Correction Marker System
**Priority**: Critical  
**Scenarios Enabled**: All  

**Core Components**:
```typescript
// ui/correctionMarker.ts
interface CorrectionMarker {
  mode: 'listening' | 'correcting' | 'idle';
  position: number;
  targetPosition: number;
  animationState: BrailleSymbol;
  processingIntensity: 'light' | 'medium' | 'heavy';
}
```

**Implementation Tasks**:
1. **Visual System**: Braille symbol renderer with CSS animations
2. **Positioning Engine**: Character-precise marker placement
3. **Animation Controller**: Mode transitions and speed adaptation
4. **Accessibility Layer**: Screen reader integration, reduced-motion support

#### 1.2 Burst-Pause-Correct Engine
**Priority**: Critical  
**Scenarios Enabled**: Marcus (Speed), James (Creative), Priya (Data)  

**Core Components**:
```typescript
// core/burstDetector.ts
interface BurstState {
  isActive: boolean;
  startTime: number;
  keystrokes: number;
  averageInterval: number;
}

// core/pauseScheduler.ts
interface PauseEvent {
  duration: number;
  triggerCorrection: boolean;
  markerAction: 'hold' | 'advance';
}
```

**Implementation Tasks**:
1. **Burst Detection**: Identify rapid typing patterns (>60 WPM sustained)
2. **Pause Recognition**: 500ms threshold with device-tier adjustment
3. **Marker Coordination**: Hold position during bursts, advance on pause
4. **Muscle Memory Training**: Consistent timing for habit formation

### Phase 2: Intelligence (Weeks 5-8)

#### 2.1 Three-Stage Pipeline Enhancement
**Priority**: High  
**Scenarios Enabled**: Maya (Academic), Carlos (Multilingual), Dr. Chen (Accessibility)  

**Enhanced Transformers**:
```typescript
// engines/enhancedNoiseTransformer.ts
interface NoiseTransformer {
  academicMode: boolean;        // Maya: Scientific terminology
  multilingualMode: boolean;    // Carlos: Cross-language detection
  accessibilityMode: boolean;   // Dr. Chen: Silent operation
}
```

**Implementation Tasks**:
1. **Domain Vocabularies**: Academic, business, legal, financial term databases
2. **Language Detection**: Real-time switching between language contexts
3. **Confidence Tuning**: Per-scenario threshold adjustment
4. **Context Windows**: Sentence-level analysis with ¬±2 sentence lookahead

#### 2.2 Scenario-Specific Optimizations
**Priority**: High  
**Scenarios Enabled**: Individual scenario enhancements  

**Scenario Modules**:
```typescript
// scenarios/academicMode.ts - Maya
interface AcademicMode {
  scientificTerminology: boolean;
  citationFormatting: boolean;
  transpositionPriority: 'high';
}

// scenarios/velocityMode.ts - Marcus
interface VelocityMode {
  speedThreshold: number;      // 150+ WPM activation
  trustLevel: number;          // 0.95+ confidence required
  phoneticsEnabled: boolean;   // Shorthand understanding
}
```

### Phase 3: Refinement (Weeks 9-12)

#### 3.1 Advanced Visual Feedback
**Priority**: Medium  
**Scenarios Enabled**: All (Enhanced UX)  

**Enhanced Marker System**:
```typescript
// ui/advancedMarker.ts
interface AdvancedMarker {
  trailEffect: boolean;
  wakeHighlighting: boolean;
  processingIndicators: ProcessingIndicator[];
  customBraillePatterns: Map<string, BrailleSequence>;
}
```

---

## Project Structure

### Revolutionary Cognitive Augmentation System

| Folder               | Purpose                                               |
| -------------------- | ----------------------------------------------------- |
| `core/`              | **Correction Marker** orchestration (burst-pause-correct, marker controller) |
| `engines/`           | **Three-Stage Pipeline** (Noise ‚Üí Context ‚Üí Tone transformers) |
| `ui/`                | **Revolutionary Visual System** (Correction Marker renderer, accessibility) |
| `crates/core-rs/`    | **Rust Cognitive Engine** (all correction logic, caret-safe operations) |
| `playground/`        | **Revolutionary Demo** (Seven Scenarios showcase, Correction Marker visualization) |
| `scenarios/`         | **Seven Usage Scenarios** (Academic, Multilingual, Accessibility, Creative, Professional, Speed, Data) |
| `config/`            | **Device-Tier Optimization** (WebGPU/WASM/CPU adaptive thresholds) |
| `utils/`             | **Safety & Privacy** (caret-safe diff, security detection) |
| `tests/`             | **Quality Assurance** (scenario validation, marker testing, accessibility) |
| `e2e/`               | **Revolutionary E2E Testing** (Seven Scenarios validation, Correction Marker behavior) |
| `docs/`              | **Revolutionary Documentation** (Seven Scenarios, Correction Marker, implementation) |
| `bindings/`          | **Cross-Platform Bridges** (Swift FFI, C headers, WASM for revolutionary experience) |

### Key Files and Directories

#### config/
- `config/defaultThresholds.ts`: Central parameters used by engines and UI
  - `SHORT_PAUSE_MS`, `LONG_PAUSE_MS`, `MAX_SWEEP_WINDOW`

#### core/
- `core/typingMonitor.ts`: Emits timestamped typing events; decouples input capture from processing.
- `core/sweepScheduler.ts`: Orchestrates streamed diffusion via typing ticks and pause catch-up; integrates with `DiffusionController`.
- `core/diffusionController.ts`: Advances a validation frontier word-by-word behind the caret; renders the active region; catches up on pause.

#### engines/
- `engines/noiseTransformer.ts`: Forward pass that proposes minimal diffs behind the CARET within a `MAX_SWEEP_WINDOW` window.
- `engines/backfillConsistency.ts`: Reverse pass that proposes consistency diffs in the stable zone behind the caret (stub returns empty array).

#### ui/
- `ui/highlighter.ts`: Renders active region (3‚Äì8 words behind caret) and applied fix highlights; honors reduced-motion.
- `ui/groupUndo.ts`: Optional batching for host‚Äëapplied diffs. NOTE: Active region (formerly "tapestry")/LM evolutions are explicitly exempt ‚Äî normal editor undo semantics apply.

#### utils/
- `utils/diff.ts`: Pure helper `replaceRange` that enforces "never cross CARET" when applying text changes.

#### crates/core-rs/ (Rust)
- `src/lib.rs`: WASM bindings and exported types; exposes logger, timer, fragment extractor, merger, and token stream stubs.
- `src/fragment.rs`: Extracts the last complete sentence using Unicode segmentation.
- `src/merge.rs`: Simple token-appending merger (placeholder for diff-based merge).
- `src/pause_timer.rs`: Idle detection utility; used to decide when to schedule sweeps.
- `src/logger.rs`: In-memory logger; serializable to JS via WASM.
- `src/llm.rs`: Token stream trait + stub tokenizer; placeholders for OpenAI/CoreML streams.

---

## Quality Assurance & Testing

### Performance Requirements
- **Latency**: p95 ‚â§ 15ms (WebGPU), ‚â§ 30ms (WASM/CPU)
- **Memory**: ‚â§150MB typical, ‚â§200MB maximum
- **Accuracy**: ‚â•95% semantic accuracy across all scenarios
- **Throughput**: Support 180+ WPM in Velocity Mode

### Success Metrics by Scenario
- **Maya**: 50% reduction in academic writing time
- **Carlos**: 40% faster multilingual document creation  
- **Dr. Chen**: 60% fewer audio interruptions during writing
- **James**: 35% increase in daily word count with maintained quality
- **Emma**: 90% of communications achieve professional tone automatically
- **Marcus**: 180+ WPM sustained speed on standard keyboard
- **Priya**: 5√ó faster data annotation with maintained analytical accuracy

### Testing Strategy
- **Unit Tests**: Vitest for TypeScript components
- **Rust Tests**: Cargo test for core logic
- **E2E Tests**: Playwright for full user scenarios
- **Performance Tests**: Latency and throughput validation
- **Accessibility Tests**: WCAG 2.2 AA compliance validation

### Quality Gates
- `pnpm typecheck`: strict TypeScript compile (no emit)
- `pnpm lint`: ESLint (flat config) for TypeScript
- `pnpm format`: Prettier write
- `pnpm format:check`: Prettier check
- `pnpm test`: Vitest unit tests (scoped to `tests/**`)
- `cargo test`: Rust core logic validation

---

## Accessibility & Compliance

### WCAG 2.2 AA Compliance
Mind‚†∂Flow is designed with accessibility as a first-class citizen, not an afterthought.

#### Key Accessibility Features
- **Screen Reader Integration**: Silent corrections with single batch announcements
- **High Contrast Support**: Correction Marker visible for low vision users
- **Reduced Motion Compliance**: Respects user motion preferences
- **Keyboard Navigation**: Full keyboard accessibility for all controls
- **Focus Management**: Caret-safe editing never disrupts screen reader position

#### Accessibility Testing
- **Screen Reader Testing**: NVDA, JAWS, VoiceOver validation
- **High Contrast Testing**: Windows and macOS high contrast modes
- **Motion Sensitivity**: Reduced motion preference respect
- **Keyboard Only**: Complete functionality without mouse
- **Color Blindness**: Alternative visual indicators beyond color

### Accessibility Principles
1. **Silent Operation**: Corrections happen without audio disruption
2. **Visual Clarity**: High contrast, clear visual indicators
3. **Predictable Behavior**: Consistent interaction patterns
4. **Error Prevention**: Caret-safe guarantees prevent user confusion
5. **Alternative Access**: Multiple ways to access information

---

## Brand & Messaging

### Primary Brand Claim
**"Typing at the speed of thought. Revolutionary."**

### Vision Pitch
Mind‚†∂Flow transforms typing from a mechanical skill into **fluid expression of thought**. Through our revolutionary **Correction Marker** system and **Burst-Pause-Correct** methodology, users achieve thought-speed typing with unprecedented accuracy‚Äîenabling everyone from PhD students with dyslexia to former stenographers to type at speeds previously impossible.

### Key Messaging Pillars
1. **Cognitive Augmentation**: Extending human capability at the intersection of thought and text
2. **Revolutionary Innovation**: The Correction Marker as a breakthrough in human-computer collaboration
3. **Universal Accessibility**: Enabling thought-speed typing for all users regardless of ability
4. **Privacy-First**: On-device processing with user control over data destiny
5. **Flow State Preservation**: Eliminating friction to maintain creative and analytical momentum

### Target Audiences
- **Writers & Knowledge Workers**: Stay in flow; get clarity without context switching
- **Engineers & Technical Users**: On-device by default, deterministic merges, privacy, portable APIs
- **Executives & Operators**: More signal per minute‚Äîcleaner docs, fewer revisions, calmer teams
- **Students & Learners**: Immediate guidance that preserves voice; less second-guessing
- **Neurodiverse Users**: Fewer micro-interruptions; reduced working-memory tax; smoother momentum
- **Security-Sensitive Orgs**: No text leaves the machine unless explicitly opted-in

### Micro-Taglines
- Noise ‚Üí Signal
- Type forward
- Live writing loop
- Flow, not friction
- Real-time text clarity
- A world beyond backspaces

---

## Development Roadmap

### üöÄ Revolutionary Vision (v0.6+)
**üéØ TRANSFORMATION ACHIEVED:**
- **Complete Documentation Overhaul**: Revolutionary vision with Seven Usage Scenarios and Correction Marker system
- **Cognitive Augmentation Focus**: Transformed from typing utility to thought-speed typing enablement
- **Scenario-Driven Development**: Clear path to enable Academic Excellence, Speed Mastery, Data Analysis, and more
- **Correction Marker Specification**: Complete visual system design with Burst-Pause-Correct methodology
- **Implementation-Ready Architecture**: Streamlined 3-phase development plan with clear technical specifications

### üéÜ Phase 1: Correction Marker Foundation (Immediate - 4 weeks)

#### Priority 1A: Revolutionary Visual System
**Objective:** Implement the Correction Marker with two-mode operation
**Revolutionary Features:**
- **Listening Mode**: Hypnotic braille pulse animation
- **Correction Mode**: Intelligent worker traveling through text with speed adaptation
- **Burst-Pause-Correct Engine**: 500ms pause detection with muscle memory training
- **Visual Experience**: Whoosh effect, processing indicators, wake highlighting

#### Priority 1B: Performance Optimization
**Focus:** Reduce first-token latency and improve responsiveness
**Actions:**
- Implement model warmup on app start
- Add token streaming coalescing for smoother output
- Optimize confidence gating thresholds based on backend
- Add performance regression detection in CI

#### Priority 1C: Advanced Workbench Analytics
**Enhancement:** Transform workbench into comprehensive analytics platform
**Features:**
- Real-time sparkline charts for latency trends
- Confidence score visualization with threshold indicators
- A/B testing framework for configuration comparison
- Advanced preset management with expected outcome validation

### üèóÔ∏è Phase 2: Platform Decision & Focus (3-4 weeks)

#### Strategic Platform Choice
**Recommended Approach: Hybrid Strategy**
1. **Stabilize web demo** as the primary development and testing platform
2. **Build macOS MVP** using the proven core logic
3. **Share Rust core** between both platforms for consistency
4. **Use web workbench** for development and QA of both platforms

### üõ†Ô∏è Phase 3: Production Readiness (4-6 weeks)

#### Priority 3A: Quality Assurance
- Comprehensive user acceptance testing
- Performance benchmarking across device tiers
- Accessibility compliance validation (WCAG 2.2 AA)
- Security audit for data handling and privacy

#### Priority 3B: Distribution Strategy
- Web demo: Progressive Web App (PWA) capabilities
- macOS app: Code signing and notarization
- Documentation: User guides and troubleshooting
- Support infrastructure: Issue tracking and user feedback

### üîÆ Phase 4: Advanced Features (6+ weeks)

#### Enhanced Intelligence
- Multi-language support beyond English
- Context-aware tone detection and suggestions
- Learning from user corrections and preferences
- Advanced grammar and style checking

#### Enterprise Features
- Team configurations and shared settings
- Usage analytics and productivity metrics
- Integration with popular editors and IDEs
- Custom vocabulary and domain-specific corrections

---

## Versioning & Release Policy

### Policy
- **Release tags**: `vMAJOR.MINOR.PATCH` (pre‚Äë1.0 uses 0.y.z). Example: `v0.4.0`, `v0.4.1`.
- **Archived baseline**: `archive/v0.1` branch created from `master@v0.1.0`. No new commits except hotfixes.
- **Active development**: `v0.6` is the active branch for the revolutionary release; merge via PRs. `master` mirrors the latest stable when applicable.
- **Hotfixes**: branch from tag (e.g., `hotfix/v0.1.1`), PR into `archive/v0.1`, tag `v0.1.1`, optionally cherry‚Äëpick to `master` if applicable.

### Current State
- Tagged: `v0.1.0` (archived).
- Branches:
  - `archive/v0.1` ‚Äî frozen baseline matching `v0.1.0`.
  - `master` ‚Äî canonical default (unified).
  - `v0.6` ‚Äî active development branch for revolutionary vision.

### Directory Conventions
- `docs/` root reflects v0.6+ revolutionary vision. Prior versions remain discoverable via archive branch.
- Demo lives at `playground/` (renamed from `web-demo/` for revolutionary positioning).

---

## Developer Guides

### Quick Start
1. Install toolchain
   - Node (pnpm), Rust, wasm-pack (for WASM builds), Playwright optional for e2e
2. Install deps: `pnpm install`
3. Run unit tests: `pnpm test`
4. Run quality gates: `pnpm typecheck && pnpm lint && pnpm format:check && pnpm test`
5. Explore tasks: open `docs/02-implementation/02-Implementation.md`

### Web Demo: Build and Run
1. Install tools (once): Rust toolchain, `wasm-pack`, Node, pnpm
2. From repo root, build the WASM package and the demo:
   - With `just`: `just build-web`
   - Or manually:
     - `wasm-pack build crates/core-rs --target web --out-dir bindings/wasm/pkg`
     - `pnpm --prefix web-demo install`
3. Run: `pnpm --prefix web-demo dev` ‚Üí open the printed URL
4. Type a sentence and watch the active region trail behind your cursor; pause to see diffusion catch up.

### Development Workflow
- Follow `.cursor/rules/workflow.mdc` when planning and executing tasks.
- Scripts
  - `pnpm typecheck`: strict TS compile (no emit)
  - `pnpm lint`: ESLint (flat config) for TS
  - `pnpm format`: Prettier write
  - `pnpm format:check`: Prettier check
  - `pnpm test`: Vitest unit tests (scoped to `tests/**`)
- Optional: `just test-all` for broader matrix including Rust/e2e, if you use `just`.

### How Rust and TypeScript Work Together
- We compile the Rust crate to WASM and import it in the web demo as a normal package. The demo calls Rust functions directly.
- Rust provides speed and safety for fragmenting, merging, and timing.
- TypeScript/React provides rapid UI development and ecosystem tooling.
- Where Swift fits (mac app): The macOS app UI will be Swift/SwiftUI calling the same Rust core via FFI (native interface).

---

## Architectural Decision Records

### ADR-0002: Caret-Safe Diffs
**Status**: Accepted  
**Context**: Ensuring user trust and preventing text changes under cursor  
**Decision**: Implement absolute guarantee that no correction occurs at or after cursor position  
**Consequences**: 
- Active region limited to text behind caret (default 20 words)
- If cursor moves into correction zone, correction is immediately cancelled
- Safety validation before every edit operation
- Graceful degradation when safety constraints conflict with corrections

### ADR-0003: Architecture Constraints
**Status**: Accepted  
**Context**: Privacy-first design and performance requirements  
**Decision**: Implement privacy-first architecture with device-tier adaptive performance  
**Consequences**:
- Default: All processing happens locally using WebGPU/WASM language models
- Optional: Encrypted remote processing with explicit per-session opt-in
- No user text persistence‚Äîonly settings and preferences stored
- Device-tier policies (WebGPU/WASM/CPU) tune cadence, token caps, and active-region size

### ADR-0005: Rust-First Orchestrator
**Status**: Accepted  
**Context**: Performance and safety requirements for core correction logic  
**Decision**: Implement Rust-first orchestrator for all correction logic and caret-safe operations  
**Consequences**:
- Rust core handles all performance-critical paths
- TypeScript UI handles rendering and user interaction
- WASM bridge enables cross-platform deployment
- Consistent behavior across web and native platforms

---

## Glossary & Terminology

### Core Concepts
- **Correction Marker**: Revolutionary visual system showing AI intelligence working alongside human creativity
- **Burst-Pause-Correct**: Natural typing rhythm where rapid bursts are followed by intelligent correction
- **Active Region**: Small neighborhood behind the caret (20 words) used for safe corrections
- **Listening Mode**: Correction Marker pulses with hypnotic braille animation while user types
- **Correction Mode**: Marker travels through text applying corrections with speed adaptation
- **Velocity Mode**: Revolutionary speed enhancement enabling 180+ WPM typing
- **Thought-Speed Typing**: Cognitive augmentation where users operate at the speed of neural firing
- **Seven Scenarios**: Revolutionary usage patterns from academic to speed typing to data analysis

### Technical Terms
- **Rust crate**: A Rust library/package. Our core logic is in `crates/core-rs`.
- **TypeScript (TS) core**: Lightweight glue in `core/`, `engines/`, and `utils/` that orchestrates typing events and rules.
- **WASM (WebAssembly)**: Lets Rust run in the browser. We compile Rust to a `.wasm` file and import it from TS.
- **wasm-bindgen**: Rust tooling that makes Rust functions callable from JS/TS.
- **Fragment extractor**: Finds the last finished sentence near the end of your text so we only correct complete thoughts.
- **Merger**: Combines incoming tokens into text. Today it appends words; later it will apply precise diffs.
- **Stub token stream**: A fake "stream of words" used to test our pipeline without a real network.
- **In-memory logger**: Collects logs in Rust and exposes them to the web demo.

### Brand Terms
- **Mind‚†∂Flow**: The revolutionary typing intelligence system (public-facing name)
- **Noise ‚Üí Signal**: Turning messy, half-formed words into clear, readable sentences
- **Human-computer interaction**: How you and your computer work together while you type
- **Cognitive prosthetic**: Extending human capability at the intersection of thought and text

---

## Conclusion

Mind‚†∂Flow represents a revolutionary transformation in how humans interact with text. By combining the **Correction Marker** visual system with **Burst-Pause-Correct** methodology, we enable **thought-speed typing** across seven distinct scenarios, from academic excellence to speed mastery.

This comprehensive documentation serves as the ultimate source of truth for all stakeholders‚Äîfrom developers implementing the system to users experiencing the revolutionary transformation of typing from mechanical skill to fluid expression of thought.

The system's success is measured not by technical complexity, but by user transformation: enabling everyone to type at the speed of thought while preserving authorship, privacy, and flow state.

**Mind‚†∂Flow doesn't just correct typing‚Äîit unlocks human potential at the intersection of thought and text.**

---

*This document represents the complete, authoritative documentation for Mind‚†∂Flow v0.6+ revolutionary typing intelligence system. All previous documentation has been consolidated and superseded by this master document.*

<!-- DOC META: VERSION=1.0 | UPDATED=2025-01-27T00:00:00Z -->